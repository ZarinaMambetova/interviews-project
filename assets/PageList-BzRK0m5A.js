import{g as j,q as D,o as F,c as L,b as W,e as z,d as E,w as H}from"./index.esm-CdN-bN9A.js";import{d as M,u as G,x as J,r as b,n as K,a as o,b as a,p as m,e as d,w as l,f as h,i as n,q as k,F as R,v as Q,t as $,y as X,o as s,z as Y,_ as Z}from"./index-CFRKEmaw.js";const P={key:2},ee={class:"flex align-items-center mb-5"},te={class:"flex align-items-center mr-2"},ae={class:"flex align-items-center mr-2"},se=["href"],ne={class:"contacts"},oe=["href"],le=["href"],ie=["href"],re={key:0},de={key:1,class:"interview-stages"},ce={key:0},ue={key:1},pe={key:0},_e={class:"flex gap-2"},ve=M({__name:"PageList",setup(me){const f=G(),y=j(),A=J(),p=b([]),r=b(!0),u=b(""),B=async()=>{r.value=!0;const i=await _(!0);p.value=i,r.value=!1},N=async()=>{r.value=!0;const i=await _();p.value=i,r.value=!1},_=async i=>{let e;return i?e=D(L(y,`users/${f.userId}/interviews`),F("createdAt","desc"),H("result","==",u.value)):e=D(L(y,`users/${f.userId}/interviews`),F("createdAt","desc")),(await W(e)).docs.map(g=>g.data())},q=async i=>{A.require({message:"Вы хотите удалить собеседование?",header:"Удаление собеседований",icon:"pi pi-info-circle",rejectLabel:"Отмена",acceptLabel:"Удалить",rejectClass:"p-button-secondary p-button-outlined",acceptClass:"p-button-danger",accept:async()=>{r.value=!0,await z(E(y,`users/${f.userId}/interviews`,i));const e=await _();p.value=[...e],r.value=!1}})};return K(async()=>{const i=await _();p.value=i,r.value=!1}),(i,e)=>{const w=d("app-dialog"),g=d("app-progress"),T=d("app-message"),I=d("app-radio"),v=d("app-button"),c=d("app-column"),C=d("app-badge"),O=d("router-link"),S=d("app-datatable"),U=X("tooltip");return s(),o(R,null,[a(w),r.value?(s(),m(g,{key:0})):!r.value&&!p.value.length?(s(),m(T,{key:1,severity:"info"},{default:l(()=>[...e[2]||(e[2]=[h("Нет добавленных собеседований",-1)])]),_:1})):(s(),o("div",P,[e[10]||(e[10]=n("h1",null,"Список собеседований",-1)),n("div",ee,[n("div",te,[a(I,{inputId:"interviewResult1",name:"result",value:"Refusal",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t)},null,8,["modelValue"]),e[3]||(e[3]=n("label",{for:"interviewResult1",class:"ml-2"},"Отказ",-1))]),n("div",ae,[a(I,{inputId:"interviewResult2",name:"result",value:"Offer",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t)},null,8,["modelValue"]),e[4]||(e[4]=n("label",{for:"interviewResult2",class:"ml-2"},"Оффер",-1))]),a(v,{class:"mr-2",onClick:B,disabled:!u.value},{default:l(()=>[...e[5]||(e[5]=[h("Применить",-1)])]),_:1},8,["disabled"]),a(v,{severity:"danger",disabled:!u.value,onClick:N},{default:l(()=>[...e[6]||(e[6]=[h("Сбросить",-1)])]),_:1},8,["disabled"])]),a(S,{value:p.value},{default:l(()=>[a(c,{field:"company",header:"Компания"}),a(c,{field:"hrName",header:"Имя HR"}),a(c,{field:"vacancyLink",header:"Вакансия"},{body:l(t=>[n("a",{href:t.data.vacancyLink,target:"_blank"},"Ссылка на вакансию",8,se)]),_:1}),a(c,{header:"Контакты"},{body:l(t=>[n("div",ne,[t.data.contactTelegram?(s(),o("a",{key:0,href:`https://t.me/${t.data.contactTelegram}`,target:"_blank",class:"contacts__telegram"},[...e[7]||(e[7]=[n("span",{class:"contacts__icon pi pi-telegram"},null,-1)])],8,oe)):k("",!0),t.data.contactWhatsApp?(s(),o("a",{key:1,href:`https://wa.me/${t.data.contactWhatsApp}`,target:"_blank",class:"contacts__whatsapp"},[...e[8]||(e[8]=[n("span",{class:"contacts__icon pi pi-whatsapp"},null,-1)])],8,le)):k("",!0),t.data.contactPhone?(s(),o("a",{key:2,href:`https://tel:${t.data.contactPhone}`,target:"_blank",class:"contacts__phone"},[...e[9]||(e[9]=[n("span",{class:"contacts__icon pi pi-phone"},null,-1)])],8,ie)):k("",!0)])]),_:1}),a(c,{header:"Пройденные этапы"},{body:l(t=>[t.data.stages?(s(),o("div",de,[(s(!0),o(R,null,Q(t.data.stages,(x,V)=>Y((s(),m(C,{key:V,value:V+1,rounded:""},null,8,["value"])),[[U,x.name,void 0,{top:!0}]])),128))])):(s(),o("span",re,"Не заполнено"))]),_:1}),a(c,{header:"Зарплатная вилка"},{body:l(t=>[t.data.salaryFrom?(s(),o("span",ue,$(t.data.salaryFrom)+" - "+$(t.data.salaryTo),1)):(s(),o("span",ce,"Не заполнено"))]),_:1}),a(c,{header:"Результат"},{body:l(t=>[t.data.result?(s(),m(C,{key:1,severity:t.data.result==="Offer"?"success":"danger",value:t.data.result==="Offer"?"Оффер":"Отказ"},null,8,["severity","value"])):(s(),o("span",pe,"Не заполнено"))]),_:1}),a(c,null,{body:l(t=>[n("div",_e,[a(O,{to:`/interview/${t.data.id}`},{default:l(()=>[a(v,{icon:"pi pi-pencil",severity:"info"})]),_:2},1032,["to"]),a(v,{icon:"pi pi-trash",severity:"danger",onClick:x=>q(t.data.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["value"])]))],64)}}}),ge=Z(ve,[["__scopeId","data-v-d7425ed3"]]);export{ge as default};
