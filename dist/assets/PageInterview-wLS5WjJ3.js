import{d as $,u as L,r as b,m as P,n as S,p as A,a as v,q as x,e as s,b as o,w as y,i as t,F as D,v as W,f as B,t as H,o as m,_ as h}from"./index-CwzZaSai.js";import{g as q,d as E,a as M,T as O,u as j}from"./index.esm-C5INgt78.js";const z={key:1,class:"content-interview"},G={class:"flex flex-column gap-2"},J={class:"flex flex-column gap-2"},K={class:"flex flex-column gap-2"},Q={class:"flex flex-column gap-2"},X={class:"flex flex-column gap-2"},Y={class:"flex flex-column gap-2"},Z={class:"flex flex-wrap gap-3 p-fluid mb-3"},ee={class:"flex-auto"},ae={class:"flex-auto"},le={class:"flex flex-column gap-2"},te=["for"],oe={class:"flex flex-column gap-2"},se=["for"],ne={class:"flex flex-column gap-2"},ue=["for"],de={class:"flex flex-wrap gap-3 mb-3"},ie={class:"flex align-items-center"},pe={class:"flex align-items-center"},re=$({__name:"PageInterview",setup(me){const w=q(),U=L(),k=P(),i=b(!0),a=b(),f=E(w,`users/${U.userId}/interviews`,k.params.id),V=async()=>{i.value=!0;const p=await M(f);if(p.exists()){const e=p.data();e.stages&&e.stages.length&&(e.stages=e.stages.map(n=>n.date&&n.date instanceof O?{...n,date:n.date.toDate()}:n)),a.value=e}i.value=!1},T=async()=>{i.value=!0,await j(f,{...a.value}),await V()},I=()=>{a.value&&(a.value.stages||(a.value.stages=[]),a.value.stages.push({name:"",date:null,description:""}))},R=p=>{a.value&&a.value.stages&&a.value.stages.splice(p,1)};return S(async()=>await V()),(p,e)=>{const n=s("app-progress"),u=s("app-input-text"),g=s("app-input-number"),c=s("app-button"),N=s("app-calendar"),C=s("app-textarea"),_=s("app-radio"),F=s("app-card");return i.value?(m(),A(n,{key:0})):a.value?.id&&!i.value?(m(),v("div",z,[o(F,null,{title:y(()=>[B("Собеседование в компанию "+H(a.value.company),1)]),content:y(()=>[t("div",G,[e[10]||(e[10]=t("label",{for:"company"},"Компания",-1)),o(u,{class:"input mb-3",id:"company",modelValue:a.value.company,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.company=l)},null,8,["modelValue"])]),t("div",J,[e[11]||(e[11]=t("label",{for:"vacancyLink"},"Описание вакансии (ссылка)",-1)),o(u,{class:"input mb-3",id:"vacancyLink",modelValue:a.value.vacancyLink,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.vacancyLink=l)},null,8,["modelValue"])]),t("div",K,[e[12]||(e[12]=t("label",{for:"hrName"},"Контакт (имя)",-1)),o(u,{class:"input mb-3",id:"hrName",modelValue:a.value.hrName,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.hrName=l)},null,8,["modelValue"])]),t("div",Q,[e[13]||(e[13]=t("label",{for:"contactTelegram"},"Telegram username HR",-1)),o(u,{class:"input mb-3",id:"contactTelegram",modelValue:a.value.contactTelegram,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.contactTelegram=l)},null,8,["modelValue"])]),t("div",X,[e[14]||(e[14]=t("label",{for:"contactWhatsApp"},"WhatsApp HR",-1)),o(u,{class:"input mb-3",id:"contactWhatsApp",modelValue:a.value.contactWhatsApp,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.contactWhatsApp=l)},null,8,["modelValue"])]),t("div",Y,[e[15]||(e[15]=t("label",{for:"contactPhone"},"Телефон HR",-1)),o(u,{class:"input mb-3",id:"contactPhone",modelValue:a.value.contactPhone,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.contactPhone=l)},null,8,["modelValue"])]),t("div",Z,[t("div",ee,[o(g,{inputId:"salaryFrom",placeholder:"Зарплатная вилка от",modelValue:a.value.salaryFrom,"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.salaryFrom=l)},null,8,["modelValue"])]),t("div",ae,[o(g,{inputId:"salaryTo",placeholder:"Зарплатная вилка до",modelValue:a.value.salaryTo,"onUpdate:modelValue":e[7]||(e[7]=l=>a.value.salaryTo=l)},null,8,["modelValue"])])]),o(c,{label:"Добавить этап",severity:"info",icon:"pi pi-plus",class:"mb-3",onClick:I}),a.value.stages?(m(!0),v(D,{key:0},W(a.value.stages,(l,d)=>(m(),v("div",{key:d,class:"interview-stage"},[t("div",le,[t("label",{for:`stage-name-${d}`},"Название этапа",8,te),o(u,{class:"input mb-3",id:`stage-name-${d}`,modelValue:l.name,"onUpdate:modelValue":r=>l.name=r},null,8,["id","modelValue","onUpdate:modelValue"])]),t("div",oe,[t("label",{for:`stage-date-${d}`},"Дата прохождения этапа",8,se),o(N,{class:"input mb-3",id:`stage-date-${d}`,dateFormat:"dd.mm.yy",modelValue:l.date,"onUpdate:modelValue":r=>l.date=r},null,8,["id","modelValue","onUpdate:modelValue"])]),t("div",ne,[t("label",{for:`stage-description-${d}`},"Комментарий",8,ue),o(C,{id:`stage-description-${d}`,class:"input mb-3",rows:"5",modelValue:l.description,"onUpdate:modelValue":r=>l.description=r},null,8,["id","modelValue","onUpdate:modelValue"])]),o(c,{severity:"danger",label:"Удалить этап",onClick:R})]))),128)):x("",!0),t("div",de,[t("div",ie,[o(_,{inputId:"interviewResult1",name:"result",value:"Refusal",modelValue:a.value.result,"onUpdate:modelValue":e[8]||(e[8]=l=>a.value.result=l)},null,8,["modelValue"]),e[16]||(e[16]=t("label",{for:"interviewResult1",class:"ml-2"},"Отказ",-1))]),t("div",pe,[o(_,{inputId:"interviewResult2",name:"result",value:"Offer",modelValue:a.value.result,"onUpdate:modelValue":e[9]||(e[9]=l=>a.value.result=l)},null,8,["modelValue"]),e[17]||(e[17]=t("label",{for:"interviewResult2",class:"ml-2"},"Оффер",-1))])]),o(c,{label:"Сохранить",icon:"pi pi-save",onClick:T})]),_:1})])):x("",!0)}}}),fe=h(re,[["__scopeId","data-v-bbf58650"]]);export{fe as default};
